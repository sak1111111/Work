@"
# Анализ Legacy PHP-кода

## Выявленные проблемы

1. Смешение логики и представления
   - HTML код генерируется напрямую в PHP скрипте
   - Отсутствует разделение ответственности
   - Код сложен для поддержки и тестирования

2. Уязвимости безопасности
   - Прямое использование `$_GET` и `$_POST` без валидации
   - Отсутствие экранирования вывода (XSS уязвимости)
   - Нет защиты от CSRF атак

3. SQL-инъекции
   - Прямая подстановка пользовательских данных в SQL запросы
   - Использование устаревших mysql_* функций
   - Отсутствие prepared statements

4. Отсутствие обработки ошибок
   - Нет проверки на существование переменных
   - Отсутствие try-catch блоков
   - Неправильная обработка исключений

5. Устаревшие функции
   - Использование mysql_ функций (удалены в PHP 7.0)
   - Отсутствие использования современных PHP возможностей

## Пример проблемного кода

```php
<?php
// Прямой доступ к пользовательскому вводу без валидации
$id = $_GET['id'];

// Устаревшая функция подключения к БД
$conn = mysql_connect("localhost", "user", "pass");
mysql_select_db("db", $conn);

// SQL-инъекция - прямая подстановка данных
$result = mysql_query("SELECT * FROM users WHERE id = " . $id);

// Смешение логики и представления
while($row = mysql_fetch_assoc($result)) {
    echo "Name: " . $row['name'] . "<br>";
}
?>